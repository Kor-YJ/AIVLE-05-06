{% extends "admin/base.html" %}

{% block title %}
    공지내용
{% endblock %}

{% block content %}
    <h1>상세 내용</h1>
    <h2>제목: {{ board.title }}</h2>
    <p>내용: {{ board.content }}</p>
    <p>작성자: {{ board.author.name }}</p>
  
    <!-- 수정 링크 -->
    <a href="{% url 'board:board_edit' board.pk %}">수정</a>
  
    <!-- 삭제 링크 -->
    <a href="#" onclick="confirmDelete('{{ board.pk }}');">삭제</a>
    <a href="{% url 'board:board_list' %}">목록으로 돌아가기</a>
    <!-- JavaScript 코드 -->
    <script>
        function confirmDelete(boardId) {
            if (confirm("정말 삭제하시겠습니까?")) {
                deleteBoard(boardId);
            }
        }

        function deleteBoard(boardId) {
            fetch(`/board/${boardId}/delete/`, {
                method: 'POST',
                headers: {
                    'X-CSRFToken': '{{ csrf_token }}',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ boardId: boardId })
            })
            .then(response => {
                if (response.ok) {
                    alert('게시물이 삭제되었습니다.');
                    window.location.href = '{% url "board:board_list" %}';
                } else {
                    alert('삭제에 실패하였습니다.');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('삭제에 실패하였습니다.');
            });
        }
    </script>
{% endblock %}